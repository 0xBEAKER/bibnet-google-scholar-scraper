<head>
  <title>Bibnet</title>
</head>

<body>
  {{> notifications}}
  <div class='container'> 
  		<h1>BibNet</h1>

  		<div class='row'>   		
			
			<div class='col-md-8 tables'>
				<h4>Add Publications</h4>

				<div class="input-group">
					<input type="text" class="form-control publication_string" placeholder="Search for papers or books to add">
					<span class="input-group-btn">
						<button class="btn btn-secondary find-publication" type="button">Go!</button>
					</span>
				</div>

				{{> publicationSearchResults }}
			</div>

			<div class='col-md-4 tables '>
				<h4>Add citations</h4>
				<button type="button" class="btn btn-default add-citations">Add Citations</button>
				
				<h4>Export</h4>
				<button type="button" class="btn btn-default generate-dot-file">Generate .dot file</button>
				<button type="button" class="btn btn-default generate-cocitation-dot-file">Generate Cocitation .dot file</button>
			</div>
				
		</div>

		<hr/>

  		<div class='row'> 
			<div class='col-md-8 tables'>
				
				<h4>Publications</h4>
				{{> tabular table=TabularTables.Publications class="table table-striped table-bordered table-condensed"}}
			</div>  		
			<div class='col-md-4 tables author-table'>
				<h4>Authors</h4>
				{{> tabular table=TabularTables.Authors class="table table-striped table-bordered table-condensed"}}	
			</div>

		</div>
		<!--
		<div class='row'> 		
			<div class='col-md-12 tables'>	
				{{> tabular table=TabularTables.Edges class="table table-striped table-bordered table-condensed"}}
			</div>
		</div>		
		-->
		{{> output }}
	
	</div>
	
</body>



<template name="output">

	<h3>Output</h3>
	<br/> 
	<div class='row'> 
		<div class='col-md-12'>
			<textarea class='dot-file' ></textarea>
		</div>  
	</div>
	<br/>
</template>

<template name="deletePublication">
	<button type="button" data-id="{{ this._id }}" class="btn btn-default delete-publication">Delete</button>
</template>

<template name="publicationDate">
	<p>{{ cleanDate this.publication_date }}</p>
</template>

<template name="pdfLink">
	<a href='{{this.pdf_link}}'>Link</a>
</template>


<template name='publicationSearchResults'>
	<table class="table"> 
		<thead>
			<tr>
				<th>Title</th>
				<th>Authors</th>
				<th>Date</th>
				<th>Citation Count</th>
				<th>Remove</th>
				<th>Add</th>
			</tr>
		</thead>
		<tbody>
		{{#each searchResults}}
			<tr data-search-result-id='{{this._id}}'>
				<td class='search-result-title'  >{{this.title}}</td>
				<td class='search-result-authors' >{{this.authors}}</td>
				<td class='search-result-authors'>{{ cleanDate publication_date}}</td>
				<td>{{this.citation_count}}</td>
				<td><button class='remove-search-result btn btn-danger'>Remove</button></td>
				<td><button class='add-search-result btn btn-success'>Add</button></td>
			</tr>
		{{/each}}
		</tbody>
	</table>
</template>


